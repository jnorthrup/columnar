headers =   liburing.h
#headerFilter = liburing/* sys/*
compilerOpts.linux = -I/usr/include -I/usr/include/x86_64-linux-gnu
linkerOpts.linux = -L/usr/lib/x86_64-linux-gnu -luring
---
#include <stdio.h>
#include <liburing.h>
#include <netinet/in.h>
#include <fcntl.h>
#include <ctype.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>

#define SERVER_STRING           "Server: zerohttpd/0.1\r\n"
#define DEFAULT_SERVER_PORT     8000
#define QUEUE_DEPTH             256
#define READ_SZ                 8192

#define EVENT_TYPE_ACCEPT       0
#define EVENT_TYPE_READ         1
#define EVENT_TYPE_WRITE        2

struct request {
    int event_type;
    int iovec_count;
    int client_socket;
    struct iovec iov[];
};

struct io_uring ring;

const char *unimplemented_content = \
        "HTTP/1.0 400 Bad Request\r\n"
        "Content-type: text/html\r\n"
        "\r\n"
        "<html>"
        "<head>"
        "<title>ZeroHTTPd: Unimplemented</title>"
        "</head>"
        "<body>"
        "<h1>Bad Request (Unimplemented)</h1>"
        "<p>Your client sent a request ZeroHTTPd did not understand and it is probably not your fault.</p>"
        "</body>"
        "</html>";

const char *http_404_content = \
        "HTTP/1.0 404 Not Found\r\n"
        "Content-type: text/html\r\n"
        "\r\n"
        "<html>"
        "<head>"
        "<title>ZeroHTTPd: Not Found</title>"
        "</head>"
        "<body>"
        "<h1>Not Found (404)</h1>"
        "<p>Your client is asking for an object that was not found on this server.</p>"
        "</body>"
        "</html>";

const   uint32_t suf[]= {
        ('jpg'),
        ('jpeg'),
        ('png'),
        ('gif'),
        ('htm'),
        ('html'),
        ('js'),
        ('css'),
        ('txt'),
        0
};

const char *ctype[]= {
        "Content-Type: image/jpeg\r\n",
        "Content-Type: image/jpeg\r\n",
        "Content-Type: image/png\r\n",
        "Content-Type: image/gif\r\n",
        "Content-Type: text/html\r\n",
        "Content-Type: text/html\r\n",
        "Content-Type: application/javascript\r\n",
        "Content-Type: text/css\r\n",
        "Content-Type: text/plain\r\n",
        "Content-Type: application/octet-stream\r\n"
} ;
